<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pick'Em Major CS2 ‚Äî –ù–æ—è–±—Ä—å 2025</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0f0c14;
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      min-height: 100vh;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
    }

    header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      color: #ff6b6b;
    }

    header p {
      font-size: 1.2rem;
      opacity: 0.8;
    }

    #player-select {
      margin-bottom: 40px;
    }

    #player-select h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #4ecdc4;
      font-size: 1.5rem;
    }

    .players {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .player-card {
      background: #1a1523;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      width: 200px;
      box-shadow: 0 0 10px rgba(255, 107, 107, 0.2);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
      border: 2px solid transparent;
    }

    .player-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 15px rgba(255, 107, 107, 0.4);
    }

    .player-card.active {
      border-color: #ff6b6b;
      box-shadow: 0 0 20px rgba(255, 107, 107, 0.6);
    }

    .player-card .player-name {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .edit-nickname {
      background: #ff6b6b;
      border: none;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }

    .edit-nickname:hover {
      background: #ff5252;
    }

    .score {
      margin-top: 10px;
      font-size: 1.2rem;
      color: #4ecdc4;
    }

    .stage {
      margin-bottom: 40px;
      padding: 20px;
      background: #14101d;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
    }

    .stage h2 {
      margin-bottom: 20px;
      color: #4ecdc4;
      font-size: 2rem;
    }

    .team-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .team-card {
      background: #1a1523;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
      position: relative;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .team-card:hover {
      transform: translateY(-5px);
      background: #2a2533;
    }

    .team-card.selected {
      background: #4a9b3a;
      color: white;
    }

    .team-card img {
      width: 60px;
      height: 60px;
      margin-bottom: 10px;
      object-fit: contain;
    }

    .team-card .name {
      font-size: 0.9rem;
      font-weight: bold;
    }

    .team-card .stage-label {
      font-size: 0.7rem;
      opacity: 0.7;
      margin-top: 5px;
    }

    .calculate-btn {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1.1rem;
      display: block;
      margin: 0 auto;
      transition: background 0.2s;
    }

    .calculate-btn:hover:not(:disabled) {
      background: #ff5252;
    }

    .calculate-btn:disabled {
      background: #555;
      cursor: not-allowed;
      opacity: 0.5;
    }

    .active-player-indicator {
      text-align: center;
      margin-bottom: 20px;
      padding: 10px;
      background: #1a1523;
      border-radius: 8px;
      color: #4ecdc4;
      font-size: 1.1rem;
    }

    @media (max-width: 768px) {
      .players {
        flex-direction: column;
        align-items: center;
      }
      .player-card {
        width: 100%;
        max-width: 300px;
      }
      .team-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      header h1 {
        font-size: 1.8rem;
      }
    }

    @media (max-width: 480px) {
      .team-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>üéØ Pick'Em Major CS2 ‚Äî –ù–æ—è–±—Ä—å 2025</h1>
    <p>–ü—Ä–µ–¥—Å–∫–∞–∂–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî –∑–∞—Ä–∞–±–æ—Ç–∞–π –æ—á–∫–∏ ‚Äî –ø–æ–±–æ—Ä–∏—Å—å –∑–∞ —Ç–∏—Ç—É–ª!</p>
  </header>

  <section id="player-select">
    <h2>üë§ –ò–≥—Ä–æ–∫–∏</h2>
    <div class="active-player-indicator" id="active-indicator">
      –í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
    </div>
    <div class="players">
      <div class="player-card" data-player="dima">
        <span class="player-name">–î–∏–º–∞</span>
        <button class="edit-nickname">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</button>
        <div class="score">–û—á–∫–∏: 10000</div>
      </div>
      <div class="player-card" data-player="evgeniy">
        <span class="player-name">–ï–≤–≥–µ–Ω–∏–π</span>
        <button class="edit-nickname">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</button>
        <div class="score">–û—á–∫–∏: 10000</div>
      </div>
      <div class="player-card" data-player="zakhar">
        <span class="player-name">–ó–∞—Ö–∞—Ä</span>
        <button class="edit-nickname">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</button>
        <div class="score">–û—á–∫–∏: 10000</div>
      </div>
    </div>
  </section>

  <section id="stages">
    <div class="stage" id="stage1">
      <h2>Stage 1</h2>
      <div class="team-grid" id="stage1-teams"></div>
      <button class="calculate-btn" id="calc-stage1" onclick="calculateStage('stage1')" disabled>‚úÖ –†–∞—Å—á–∏—Ç–∞—Ç—å –æ—á–∫–∏</button>
    </div>

    <div class="stage" id="stage2">
      <h2>Stage 2</h2>
      <div class="team-grid" id="stage2-teams"></div>
      <button class="calculate-btn" id="calc-stage2" onclick="calculateStage('stage2')" disabled>‚úÖ –†–∞—Å—á–∏—Ç–∞—Ç—å –æ—á–∫–∏</button>
    </div>

    <div class="stage" id="stage3">
      <h2>Stage 3</h2>
      <div class="team-grid" id="stage3-teams"></div>
      <button class="calculate-btn" id="calc-stage3" onclick="calculateStage('stage3')" disabled>‚úÖ –†–∞—Å—á–∏—Ç–∞—Ç—å –æ—á–∫–∏</button>
    </div>
  </section>

  <script>
    // --- –î–ê–ù–ù–´–ï –ö–û–ú–ê–ù–î ---
    const teamsStage1 = [
      { name: "FaZe", logo: "placeholder.png", stage: "Stage 1" },
      { name: "GamerLegion", logo: "placeholder.png", stage: "Stage 1" },
      { name: "Ninjas in Pyjamas", logo: "placeholder.png", stage: "Stage 1" },
      { name: "B8", logo: "placeholder.png", stage: "Stage 1" },
      { name: "PARIVISION", logo: "placeholder.png", stage: "Stage 1" },
      { name: "fnatic", logo: "placeholder.png", stage: "Stage 1" },
      { name: "Legacy", logo: "placeholder.png", stage: "Stage 1" },
      { name: "Imperial", logo: "placeholder.png", stage: "Stage 1" },
      { name: "NRG", logo: "placeholder.png", stage: "Stage 1" },
      { name: "M80", logo: "placeholder.png", stage: "Stage 1" },
      { name: "Fluxo", logo: "placeholder.png", stage: "Stage 1" },
      { name: "RED Canids", logo: "placeholder.png", stage: "Stage 1" },
      { name: "Lynn Vision", logo: "placeholder.png", stage: "Stage 1" },
      { name: "The Huns", logo: "placeholder.png", stage: "Stage 1" },
      { name: "FlyQuest", logo: "placeholder.png", stage: "Stage 1" },
      { name: "Rare Atom", logo: "placeholder.png", stage: "Stage 1" }
    ];

    const teamsStage2 = [
      { name: "Aurora", logo: "placeholder.png", stage: "Stage 2" },
      { name: "Natus Vincere", logo: "placeholder.png", stage: "Stage 2" },
      { name: "Astralis", logo: "placeholder.png", stage: "Stage 2" },
      { name: "3DMAX", logo: "placeholder.png", stage: "Stage 2" },
      { name: "Liquid", logo: "placeholder.png", stage: "Stage 2" },
      { name: "MIBR", logo: "placeholder.png", stage: "Stage 2" },
      { name: "Passion UA", logo: "placeholder.png", stage: "Stage 2" },
      { name: "TYLOO", logo: "placeholder.png", stage: "Stage 2" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 2" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 2" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 2" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 2" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 2" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 2" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 2" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 2" }
    ];

    const teamsStage3 = [
      { name: "Vitality", logo: "placeholder.png", stage: "Stage 3" },
      { name: "Spirit", logo: "placeholder.png", stage: "Stage 3" },
      { name: "Falcons", logo: "placeholder.png", stage: "Stage 3" },
      { name: "MOUZ", logo: "placeholder.png", stage: "Stage 3" },
      { name: "G2", logo: "placeholder.png", stage: "Stage 3" },
      { name: "FURIA", logo: "placeholder.png", stage: "Stage 3" },
      { name: "paiN", logo: "placeholder.png", stage: "Stage 3" },
      { name: "The MongolZ", logo: "placeholder.png", stage: "Stage 3" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 3" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 3" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 3" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 3" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 3" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 3" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 3" },
      { name: "QUALIFIER", logo: "QUALIFIER.png", stage: "Stage 3" }
    ];

    // --- –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò ---
    let players = {
      dima: { name: "–î–∏–º–∞", score: 10000, picks: { stage1: [], stage2: [], stage3: [] } },
      evgeniy: { name: "–ï–≤–≥–µ–Ω–∏–π", score: 10000, picks: { stage1: [], stage2: [], stage3: [] } },
      zakhar: { name: "–ó–∞—Ö–∞—Ä", score: 10000, picks: { stage1: [], stage2: [], stage3: [] } }
    };

    let activePlayer = null;

    // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
    function init() {
      loadFromStorage();
      renderPlayers();
      setupPlayerSelection();
      renderTeams("stage1", teamsStage1);
      renderTeams("stage2", teamsStage2);
      renderTeams("stage3", teamsStage3);
      updateCalculateButtons();
    }

    // --- –ù–ê–°–¢–†–û–ô–ö–ê –í–´–ë–û–†–ê –ò–ì–†–û–ö–ê ---
    function setupPlayerSelection() {
      const playerCards = document.querySelectorAll(".player-card");
      playerCards.forEach(card => {
        card.addEventListener("click", (e) => {
          if (e.target.classList.contains("edit-nickname")) return;
          const playerKey = card.dataset.player;
          setActivePlayer(playerKey);
        });
      });
    }

    // --- –£–°–¢–ê–ù–û–í–ö–ê –ê–ö–¢–ò–í–ù–û–ì–û –ò–ì–†–û–ö–ê ---
    function setActivePlayer(playerKey) {
      activePlayer = playerKey;
      document.querySelectorAll(".player-card").forEach(card => {
        card.classList.remove("active");
      });
      document.querySelector(`.player-card[data-player="${playerKey}"]`).classList.add("active");
      document.getElementById("active-indicator").textContent = `–ê–∫—Ç–∏–≤–Ω—ã–π –∏–≥—Ä–æ–∫: ${players[playerKey].name}`;
      
      // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—ã —Å —É—á—ë—Ç–æ–º –≤—ã–±–æ—Ä–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
      renderTeams("stage1", teamsStage1);
      renderTeams("stage2", teamsStage2);
      renderTeams("stage3", teamsStage3);
      updateCalculateButtons();
    }

    // --- –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ò–ì–†–û–ö–û–í ---
    function renderPlayers() {
      const playerCards = document.querySelectorAll(".player-card");
      playerCards.forEach(card => {
        const playerKey = card.dataset.player;
        const playerName = card.querySelector(".player-name");
        const scoreDiv = card.querySelector(".score");

        playerName.textContent = players[playerKey].name;
        scoreDiv.textContent = `–û—á–∫–∏: ${players[playerKey].score.toLocaleString()}`;

        card.querySelector(".edit-nickname").onclick = (e) => {
          e.stopPropagation();
          const newName = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –Ω–∏–∫ (1-20 —Å–∏–º–≤–æ–ª–æ–≤):", players[playerKey].name);
          if (newName !== null) {
            const trimmedName = newName.trim();
            if (trimmedName.length === 0) {
              // –û—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä–æ–µ –∏–º—è
              return;
            }
            if (trimmedName.length > 0 && trimmedName.length <= 20) {
              players[playerKey].name = trimmedName;
              renderPlayers();
              saveToStorage();
              if (activePlayer === playerKey) {
                document.getElementById("active-indicator").textContent = `–ê–∫—Ç–∏–≤–Ω—ã–π –∏–≥—Ä–æ–∫: ${players[playerKey].name}`;
              }
              alert("‚úÖ –ù–∏–∫–Ω–µ–π–º –∏–∑–º–µ–Ω—ë–Ω!");
            } else {
              alert("‚ùå –ù–∏–∫–Ω–µ–π–º –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 1 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤!");
            }
          }
        };
      });
    }

    // --- –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ö–û–ú–ê–ù–î ---
    function renderTeams(stageId, teams) {
      const container = document.getElementById(`${stageId}-teams`);
      container.innerHTML = "";

      if (!activePlayer) {
        teams.forEach((team, index) => {
          const teamCard = document.createElement("div");
          teamCard.className = "team-card";
          teamCard.dataset.index = index;
          teamCard.style.opacity = "0.5";
          teamCard.style.cursor = "not-allowed";
          teamCard.innerHTML = `
            <img src="${team.logo}" alt="${team.name}" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'60\\' height=\\'60\\'%3E%3Crect fill=\\'%23333\\' width=\\'60\\' height=\\'60\\'/%3E%3Ctext fill=\\'%23999\\' x=\\'50%25\\' y=\\'50%25\\' text-anchor=\\'middle\\' dy=\\'.3em\\' font-size=\\'10\\'%3E${team.name.substring(0, 3)}%3C/text%3E%3C/svg%3E'">
            <div class="name">${team.name}</div>
            <div class="stage-label">${team.stage}</div>
          `;
          container.appendChild(teamCard);
        });
        return;
      }

      const playerPicks = players[activePlayer].picks[stageId] || [];
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
      if (!Array.isArray(playerPicks)) {
        players[activePlayer].picks[stageId] = [];
      }

      teams.forEach((team, index) => {
        const teamCard = document.createElement("div");
        teamCard.className = "team-card";
        teamCard.dataset.index = index;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—ã–±—Ä–∞–Ω–∞ –ª–∏ —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —ç—Ç–æ–≥–æ —Å–ª–æ—Ç–∞
        const isSelected = playerPicks[index] === team.name;

        if (isSelected) {
          teamCard.classList.add("selected");
        }

        teamCard.innerHTML = `
          <img src="${team.logo}" alt="${team.name}" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'60\\' height=\\'60\\'%3E%3Crect fill=\\'%23333\\' width=\\'60\\' height=\\'60\\'/%3E%3Ctext fill=\\'%23999\\' x=\\'50%25\\' y=\\'50%25\\' text-anchor=\\'middle\\' dy=\\'.3em\\' font-size=\\'10\\'%3E${team.name.substring(0, 3)}%3C/text%3E%3C/svg%3E'">
          <div class="name">${team.name}</div>
          <div class="stage-label">${team.stage}</div>
        `;

        teamCard.onclick = () => selectTeam(stageId, index, teams);

        container.appendChild(teamCard);
      });

      updateCalculateButtons();
    }

    // --- –í–´–ë–û–† –ö–û–ú–ê–ù–î–´ ---
    function selectTeam(stageId, index, teams) {
      if (!activePlayer) {
        alert("‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞!");
        return;
      }

      const team = teams[index];
      const allCards = document.querySelectorAll(`#${stageId}-teams .team-card`);

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
      if (!players[activePlayer].picks[stageId]) {
        players[activePlayer].picks[stageId] = [];
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –¥–æ –Ω—É–∂–Ω–æ–π –¥–ª–∏–Ω—ã
      while (players[activePlayer].picks[stageId].length < teams.length) {
        players[activePlayer].picks[stageId].push(null);
      }

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–∞ –ª–∏ —É–∂–µ –≤—ã–±—Ä–∞–Ω–∞ —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —ç—Ç–æ–≥–æ —Å–ª–æ—Ç–∞
      const currentPick = players[activePlayer].picks[stageId][index];
      
      if (currentPick === team.name) {
        // –°–Ω–∏–º–∞–µ–º –≤—ã–±–æ—Ä –¥–ª—è —ç—Ç–æ–≥–æ —Å–ª–æ—Ç–∞
        players[activePlayer].picks[stageId][index] = null;
      } else {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±–æ—Ä –¥–ª—è —ç—Ç–æ–≥–æ —Å–ª–æ—Ç–∞ (–∫–∞–∂–¥—ã–π —Å–ª–æ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º)
        players[activePlayer].picks[stageId][index] = team.name;
      }

      saveToStorage();
      updateCalculateButtons();
      
      // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
      renderTeams(stageId, teams);
    }

    // --- –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–ù–û–ü–û–ö –†–ê–°–ß–Å–¢–ê ---
    function updateCalculateButtons() {
      ["stage1", "stage2", "stage3"].forEach(stageId => {
        const btn = document.getElementById(`calc-${stageId}`);
        if (!btn) return;

        let hasPicks = false;
        Object.keys(players).forEach(playerKey => {
          if (players[playerKey].picks[stageId]) {
            const picks = players[playerKey].picks[stageId];
            if (Array.isArray(picks) && picks.some(pick => pick !== null && pick !== undefined && pick !== "")) {
              hasPicks = true;
            }
          }
        });

        btn.disabled = !hasPicks;
      });
    }

    // --- –†–ê–°–ß–Å–¢ –û–ß–ö–û–í ---
    function calculateStage(stageId) {
      const correctAnswers = getCorrectAnswers(stageId);

      Object.keys(players).forEach(playerKey => {
        let correct = 0;
        let wrong = 0;

        if (players[playerKey].picks[stageId]) {
          const picks = players[playerKey].picks[stageId];
          if (Array.isArray(picks)) {
            for (let i = 0; i < picks.length && i < correctAnswers.length; i++) {
              const userPick = picks[i];
              const actualWinner = correctAnswers[i];

              if (userPick === actualWinner) {
                correct++;
              } else if (userPick && userPick !== null && userPick !== undefined && userPick !== "") {
                wrong++;
              }
            }
          }
        }

        players[playerKey].score = 10000 + (correct * 1000) - (wrong * 500);
      });

      renderPlayers();
      saveToStorage();
      alert("‚úÖ –û—á–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!");
    }

    // --- –≠–¢–ê–õ–û–ù–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ ---
    function getCorrectAnswers(stageId) {
      if (stageId === "stage1") {
        return [
          "FaZe", "fnatic", "NRG", "Imperial",
          "GamerLegion", "Legacy", "M80", "RED Canids",
          "Lynn Vision", "The Huns", "FlyQuest", "Rare Atom",
          "PARIVISION", "Ninjas in Pyjamas", "B8", "Fluxo"
        ];
      } else if (stageId === "stage2") {
        return [
          "Aurora", "Natus Vincere", "Astralis", "3DMAX",
          "Liquid", "MIBR", "Passion UA", "TYLOO",
          "QUALIFIER", "QUALIFIER", "QUALIFIER", "QUALIFIER",
          "QUALIFIER", "QUALIFIER", "QUALIFIER", "QUALIFIER"
        ];
      } else if (stageId === "stage3") {
        return [
          "Vitality", "Spirit", "Falcons", "MOUZ",
          "G2", "FURIA", "paiN", "The MongolZ",
          "QUALIFIER", "QUALIFIER", "QUALIFIER", "QUALIFIER",
          "QUALIFIER", "QUALIFIER", "QUALIFIER", "QUALIFIER"
        ];
      }
      return [];
    }

    // --- –°–û–•–†–ê–ù–ï–ù–ò–ï –í LOCALSTORAGE ---
    function saveToStorage() {
      localStorage.setItem("pickem_players", JSON.stringify(players));
    }

    // --- –ó–ê–ì–†–£–ó–ö–ê –ò–ó LOCALSTORAGE ---
    function loadFromStorage() {
      const saved = localStorage.getItem("pickem_players");
      if (saved) {
        try {
          const loaded = JSON.parse(saved);
          // –û–±—ä–µ–¥–∏–Ω—è–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
          Object.keys(players).forEach(key => {
            if (loaded[key]) {
              players[key] = {
                name: loaded[key].name || players[key].name,
                score: loaded[key].score !== undefined ? loaded[key].score : players[key].score,
                picks: loaded[key].picks || players[key].picks
              };
            }
          });
        } catch (e) {
          console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:", e);
        }
      }
    }

    // --- –ó–ê–ü–£–°–ö ---
    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
