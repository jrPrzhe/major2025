<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî Pick'Em Major CS2</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .admin-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .admin-header {
      text-align: center;
      margin-bottom: 30px;
    }
    .admin-password {
      text-align: center;
      margin-bottom: 30px;
    }
    .admin-password input {
      padding: 10px;
      font-size: 1.1rem;
      border-radius: 5px;
      border: 2px solid #4ecdc4;
      background: #1a1523;
      color: white;
      width: 300px;
    }
    .admin-password button {
      padding: 10px 20px;
      margin-left: 10px;
      background: #ff6b6b;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1.1rem;
    }
    .admin-content {
      display: none;
    }
    .admin-content.active {
      display: block;
    }
    .results-section {
      background: #1a1523;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    .results-section h3 {
      color: #4ecdc4;
      margin-bottom: 15px;
    }
    .result-category {
      margin-bottom: 20px;
    }
    .result-category h4 {
      color: #ff6b6b;
      margin-bottom: 10px;
    }
    .result-slots {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .result-slot {
      background: #14101d;
      padding: 15px;
      border-radius: 8px;
      min-width: 150px;
      position: relative;
    }
    .result-slot select {
      width: 100%;
      padding: 8px;
      background: #0f0c14;
      color: white;
      border: 1px solid #4ecdc4;
      border-radius: 5px;
      font-size: 0.9rem;
    }
    .save-results-btn {
      background: #4ecdc4;
      color: #0f0c14;
      border: none;
      padding: 15px 30px;
      border-radius: 5px;
      font-size: 1.2rem;
      cursor: pointer;
      display: block;
      margin: 20px auto;
      font-weight: bold;
    }
    .save-results-btn:hover {
      background: #3ab5ad;
    }
    .reset-results-btn {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 5px;
      font-size: 1.2rem;
      cursor: pointer;
      font-weight: bold;
    }
    .reset-results-btn:hover {
      background: #ff5252;
    }
    .back-link {
      display: block;
      text-align: center;
      margin-top: 20px;
      color: #4ecdc4;
      text-decoration: none;
    }
    .back-link:hover {
      text-decoration: underline;
    }
    .stage-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .stage-controls h3 {
      margin: 0;
    }
    .stage-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      user-select: none;
    }
    .stage-toggle input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }
    .stage-toggle span {
      color: #4ecdc4;
      font-weight: bold;
    }
    
    /* Responsive styles for admin */
    @media (max-width: 768px) {
      .admin-container {
        padding: 15px;
      }
      
      .admin-header h1 {
        font-size: 1.5rem;
      }
      
      .admin-password {
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: center;
      }
      
      .admin-password input {
        width: 100%;
        max-width: 100%;
      }
      
      .admin-password button {
        width: 100%;
        max-width: 200px;
        margin-left: 0;
      }
      
      .stage-nav {
        flex-wrap: wrap;
        gap: 8px;
      }
      
      .stage-tab {
        flex: 1;
        min-width: 80px;
        padding: 8px 12px;
        font-size: 0.9rem;
      }
      
      .results-section {
        padding: 15px;
      }
      
      .results-section h3 {
        font-size: 1.2rem;
      }
      
      .result-category h4 {
        font-size: 1rem;
      }
      
      .result-slots {
        gap: 8px;
      }
      
      .result-slot {
        min-width: 100%;
        flex: 1;
      }
      
      .save-results-btn, .reset-results-btn {
        width: 100%;
        padding: 12px 20px;
        font-size: 1rem;
      }
      
      .stage-controls {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .stage-controls h3 {
        font-size: 1.2rem;
      }
      
      .stage-toggle {
        width: 100%;
      }
      
      div[style*="display: flex"] {
        flex-direction: column !important;
        gap: 10px !important;
      }
      
      div[style*="display: flex"] button {
        width: 100% !important;
      }
    }
    
    @media (max-width: 480px) {
      .admin-header h1 {
        font-size: 1.2rem;
      }
      
      .stage-tab {
        font-size: 0.8rem;
        padding: 6px 10px;
      }
      
      .results-section {
        padding: 12px;
      }
      
      .result-slot {
        padding: 12px;
      }
      
      .stage-controls h3 {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <div class="admin-header">
      <h1>üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
      <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç—É—Ä–Ω–∏—Ä–∞</p>
    </div>

    <div class="admin-password" id="password-section">
      <input type="password" id="admin-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">
      <button onclick="checkAdminPassword()">–í–æ–π—Ç–∏</button>
    </div>

    <div class="admin-content" id="admin-content">
      <nav class="stage-nav">
        <button class="stage-tab active" data-stage="stage1" onclick="showAdminStage('stage1')">Stage 1</button>
        <button class="stage-tab" data-stage="stage2" onclick="showAdminStage('stage2')">Stage 2</button>
        <button class="stage-tab" data-stage="stage3" onclick="showAdminStage('stage3')">Stage 3</button>
        <button class="stage-tab" data-stage="champion" onclick="showAdminStage('champion')">üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å</button>
      </nav>

      <!-- Stage 1 Results -->
      <div class="admin-stage active" id="admin-stage1">
        <div class="results-section">
          <div class="stage-controls">
            <h3>Stage 1 - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
            <label class="stage-toggle">
              <input type="checkbox" id="toggle-stage1" onchange="toggleStageStatus('stage1', this.checked)">
              <span>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ</span>
            </label>
          </div>
          
          <div class="result-category">
            <h4>3:0 - ADVANCED</h4>
            <div class="result-slots" id="admin-results-30-stage1">
              <!-- Will be populated by JS -->
            </div>
          </div>

          <div class="result-category">
            <h4>0:3 - ELIMINATED</h4>
            <div class="result-slots" id="admin-results-03-stage1">
              <!-- Will be populated by JS -->
            </div>
          </div>

          <div class="result-category">
            <h4>3:1 OR 3:2 ADVANCED</h4>
            <div class="result-slots" id="admin-results-31-32-stage1">
              <!-- Will be populated by JS -->
            </div>
          </div>

          <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
            <button class="save-results-btn" onclick="saveAdminResults('stage1')">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Stage 1</button>
            <button class="reset-results-btn" onclick="resetAdminResults('stage1')">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Stage 1</button>
          </div>
        </div>
      </div>

      <!-- Stage 2 Results -->
      <div class="admin-stage" id="admin-stage2">
        <div class="results-section">
          <div class="stage-controls">
            <h3>Stage 2 - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
            <label class="stage-toggle">
              <input type="checkbox" id="toggle-stage2" onchange="toggleStageStatus('stage2', this.checked)">
              <span>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ</span>
            </label>
          </div>
          
          <div class="result-category">
            <h4>3:0 - ADVANCED</h4>
            <div class="result-slots" id="admin-results-30-stage2"></div>
          </div>

          <div class="result-category">
            <h4>0:3 - ELIMINATED</h4>
            <div class="result-slots" id="admin-results-03-stage2"></div>
          </div>

          <div class="result-category">
            <h4>3:1 OR 3:2 ADVANCED</h4>
            <div class="result-slots" id="admin-results-31-32-stage2"></div>
          </div>

          <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
            <button class="save-results-btn" onclick="saveAdminResults('stage2')">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Stage 2</button>
            <button class="reset-results-btn" onclick="resetAdminResults('stage2')">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Stage 2</button>
          </div>
        </div>
      </div>

      <!-- Stage 3 Results -->
      <div class="admin-stage" id="admin-stage3">
        <div class="results-section">
          <div class="stage-controls">
            <h3>Stage 3 - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
            <label class="stage-toggle">
              <input type="checkbox" id="toggle-stage3" onchange="toggleStageStatus('stage3', this.checked)">
              <span>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ</span>
            </label>
          </div>
          
          <div class="result-category">
            <h4>3:0 - ADVANCED</h4>
            <div class="result-slots" id="admin-results-30-stage3"></div>
          </div>

          <div class="result-category">
            <h4>0:3 - ELIMINATED</h4>
            <div class="result-slots" id="admin-results-03-stage3"></div>
          </div>

          <div class="result-category">
            <h4>3:1 OR 3:2 ADVANCED</h4>
            <div class="result-slots" id="admin-results-31-32-stage3"></div>
          </div>

          <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
            <button class="save-results-btn" onclick="saveAdminResults('stage3')">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Stage 3</button>
            <button class="reset-results-btn" onclick="resetAdminResults('stage3')">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Stage 3</button>
          </div>
        </div>
      </div>

      <!-- Champion Selection -->
      <div class="admin-stage" id="admin-champion-section">
        <div class="results-section">
          <div class="stage-controls">
            <h3>üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å —Ç—É—Ä–Ω–∏—Ä–∞ (+3000 –æ—á–∫–æ–≤)</h3>
            <label class="stage-toggle">
              <input type="checkbox" id="toggle-champion" onchange="toggleChampionStatus(this.checked)">
              <span>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ</span>
            </label>
          </div>
          
          <div class="result-category">
            <h4>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Ç—É—Ä–Ω–∏—Ä–∞</h4>
            <div class="result-slots" id="admin-champion">
              <!-- Will be populated by JS -->
            </div>
          </div>

          <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
            <button class="save-results-btn" onclick="saveChampion()">üèÜ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è</button>
            <button class="reset-results-btn" onclick="resetChampion()">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è</button>
          </div>
        </div>
      </div>

      <!-- Database Backup Section -->
      <div class="results-section" style="margin-top: 30px;">
        <h3>üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h3>
        <p style="color: #ccc; margin-bottom: 15px;">
          ‚ö†Ô∏è –í–∞–∂–Ω–æ: –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö!<br>
          –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —É–ø–∞–¥–µ—Ç, –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏.
        </p>
        <div style="display: flex; gap: 15px; justify-content: center;">
          <button class="save-results-btn" onclick="downloadDatabaseBackup()">üíæ –°–∫–∞—á–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é</button>
        </div>
        <p style="color: #888; font-size: 0.9rem; margin-top: 15px; text-align: center;">
          –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä, –∑–∞–º–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª database.db –Ω–∞ —Å–∫–∞—á–∞–Ω–Ω—ã–π, –∑–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä.
        </p>
      </div>

      <a href="index.html" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
  </div>

  <script src="js/api.js"></script>
  <script src="js/admin-api.js"></script>
  <script>
    // Verify all functions are loaded
    window.addEventListener('load', function() {
      console.log('[ADMIN HTML] Page loaded, verifying functions...');
      const requiredFunctions = [
        'checkAdminPassword',
        'showAdminStage',
        'saveAdminResults',
        'resetAdminResults',
        'toggleStageStatus',
        'toggleChampionStatus',
        'saveChampion',
        'resetChampion'
      ];
      
      const missing = requiredFunctions.filter(fn => typeof window[fn] !== 'function');
      if (missing.length > 0) {
        console.error('[ADMIN HTML] Missing functions:', missing);
        alert('–û—à–∏–±–∫–∞: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç: ' + missing.join(', '));
      } else {
        console.log('[ADMIN HTML] All functions loaded successfully!');
      }
      
      // Verify api object
      if (typeof api === 'undefined') {
        console.error('[ADMIN HTML] api object is not defined!');
        alert('–û—à–∏–±–∫–∞: –æ–±—ä–µ–∫—Ç api –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!');
      } else {
        console.log('[ADMIN HTML] api object is available');
      }
    });
  </script>
  <!-- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ -->
  <!-- <script src="admin-auto-script.js"></script> -->
</body>
</html>

